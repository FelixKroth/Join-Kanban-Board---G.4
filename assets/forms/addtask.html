<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/CSS/colors.css">
    <link rel="stylesheet" href="/CSS/fonts.css">
    <link rel="stylesheet" href="/CSS/global_style.css">
    <link rel="stylesheet" href="/CSS/style.css">
    <link rel="stylesheet" href="/CSS/addTask-style.css">
    <link rel="stylesheet" href="/CSS/addTask-media.css">
    <link rel="stylesheet" href="/CSS/media.css">
    <link rel="icon" href="/assets/img/join_favicon.svg">
    <title>Join</title>
</head>

<body onload="includeHTML()">
    <!-- Funktion "init" muss noch eingefügt werden; es funktioniert mit dieser Funktion die Animation nicht mehr,
     das svg in clear färbt sich nicht mehr azurblau-->
    <section id="main-container" class="background-grey">
        <div w3-include-html="/assets/templates/sidebar_menu.html"></div>


        <!-- headline -->
        <h2 class="task-headline mb-48">Add Task</h2>

        <!-- form-start -->
        <form class="form-height w-50" onsubmit="saveTask(); return false;">

            <div class="flex-evenly-start padding-bottom-24 parent-container">
                <div class="left-container">

                    <!-- title -->
                    <div class="padding-bottom-24">
                        <div class="mb-8 flex field-headline">Title<div class="asterisk-color">*</div>
                        </div>
                        <input id="input-title" required minlength="2" class="field-325" type="text" placeholder="Enter a title">
                    </div>

                    <!-- description -->
                    <div class="padding-bottom-24">
                        <div class="mb-8 field-headline">Description</div>
                        <textarea required pattern="[A-Za-z0-9]+" maxlength="450" class="description-input"
                            name="w3review" rows="4" cols="50"
                            placeholder="Enter a description in english please!"></textarea>
                    </div>

                    <!-- drop-down-contacts -->
                    <div class="mb-8 flex field-headline">Assigned to</div>
                    <div class="dropdown">
                        <div class="dropbtn">Select contacts to assign</div>
                        <div class="dropdown-content">
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Sofia Müller (You)
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                            <div class="contacts-dropdown flex-align-center-between">
                                <div class="contacts-left flex-align-center gap-8"><img class="addtask-initials"
                                        src="/assets/img/contact_initials.svg" alt="contact initials">Max Mustermann
                                </div><input type="checkbox">
                            </div>
                        </div>
                    </div>

                </div>


                <div class="form-seperator"></div>

                <div class="right-container">
                    <div class="padding-bottom-24">
                        <!-- date -->
                        <div class="mb-8 flex field-headline">Due date<div class="asterisk-color">*</div>
                        </div>
                        <input id="date-picker" type="date" class="field-325 date"
                            placeholder="dd/mm/yyyy Kalenderbutton" required>
                    </div>

                    <!-- prio -->
                    <div class="padding-bottom-24">
                        <div class="mb-8 field-headline">Prio</div>
                        <div class="flex gap-28 prio-container">

                            <button class="btn urgent flex-just-align-center" id="btn1"
                                onclick="changeColor('btn1','urgent-path1','urgent-path2')">Urgent
                                <svg id="urgent_icon" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 133 97.72">
                                    <defs>
                                        <style>
                                            .cls-1 {
                                                fill: #ff7a00;
                                                stroke-width: 0px;
                                            }
                                        </style>
                                    </defs>
                                    <path id="urgent-path1" class="cls-1"
                                        d="M125.7,97.71c-1.56,0-3.08-.5-4.34-1.44l-54.87-40.96L11.63,96.27c-.77.58-1.65.99-2.57,1.23-.93.23-1.9.28-2.84.14-.95-.14-1.86-.47-2.68-.97-.82-.5-1.54-1.16-2.11-1.94-.57-.78-.98-1.66-1.21-2.61-.23-.94-.28-1.92-.14-2.88.29-1.94,1.32-3.68,2.88-4.84l59.2-44.24c1.25-.94,2.77-1.45,4.34-1.45s3.08.51,4.34,1.45l59.2,44.24c1.24.92,2.15,2.22,2.62,3.7.47,1.48.46,3.07-.02,4.55-.48,1.48-1.41,2.76-2.66,3.67-1.24.91-2.74,1.4-4.28,1.4Z" />
                                    <path id="urgent-path2" class="cls-1"
                                        d="M125.7,59c-1.56,0-3.08-.5-4.34-1.44l-54.87-40.96L11.63,57.56c-1.56,1.16-3.5,1.65-5.42,1.36-1.91-.29-3.63-1.34-4.78-2.91-1.15-1.57-1.63-3.55-1.35-5.48.29-1.94,1.32-3.68,2.88-4.84L62.16,1.45c1.25-.94,2.77-1.45,4.34-1.45s3.08.51,4.34,1.45l59.2,44.24c1.24.92,2.15,2.22,2.62,3.7.47,1.48.46,3.07-.02,4.55-.48,1.48-1.41,2.76-2.66,3.67-1.24.91-2.74,1.4-4.28,1.4Z" />
                                </svg></button>

                            <button class="btn urgent flex-just-align-center" id="btn2"
                                onclick="changeColor('btn2','medium-path1','medium-path2')">Medium
                                <svg id="medium_icon" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 134 49.92">
                                    <defs>
                                        <style>
                                            .cls-8 {
                                                fill: #ffa800;
                                                stroke-width: 0px;
                                            }
                                        </style>
                                    </defs>
                                    <path id="medium-path1" class="cls-8"
                                        d="M126.66,49.92H7.34c-1.95,0-3.81-.78-5.19-2.17-1.38-1.39-2.15-3.27-2.15-5.23s.77-3.84,2.15-5.23c1.38-1.39,3.24-2.17,5.19-2.17h119.32c1.95,0,3.82.78,5.19,2.17,1.38,1.39,2.15,3.27,2.15,5.23s-.77,3.84-2.15,5.23c-1.38,1.39-3.25,2.17-5.19,2.17Z" />
                                    <path id="medium-path2" class="cls-8"
                                        d="M126.66,14.79H7.34c-1.95,0-3.81-.78-5.19-2.17-1.38-1.39-2.15-3.27-2.15-5.23S.77,3.55,2.15,2.17C3.53.78,5.4,0,7.34,0h119.32c1.95,0,3.82.78,5.19,2.17,1.38,1.39,2.15,3.27,2.15,5.23s-.77,3.84-2.15,5.23c-1.38,1.39-3.25,2.17-5.19,2.17Z" />
                                </svg></button>

                            <button class="btn low flex-just-align-center" id="btn3"
                                onclick="changeColor('btn3','low-path1','low-path2')">Low
                                <svg id="low_icon" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 133.32 94.11">
                                    <defs>
                                        <style>
                                            .cls-11 {
                                                fill: #7ae229;
                                                stroke-width: 0px;
                                            }
                                        </style>
                                    </defs>
                                    <path id="low-path1" class="cls-11"
                                        d="M66.66,56.82c-1.56,0-3.09-.48-4.35-1.38L2.97,12.83c-.77-.55-1.42-1.25-1.92-2.05s-.82-1.69-.97-2.61c-.29-1.86.2-3.76,1.35-5.28C2.58,1.37,4.31.36,6.23.08c1.92-.28,3.87.19,5.43,1.31l55,39.45L121.66,1.39c.77-.55,1.65-.96,2.58-1.18.93-.23,1.9-.27,2.85-.13.95.14,1.86.46,2.68.94.82.48,1.54,1.12,2.11,1.87.57.75.98,1.6,1.22,2.51.23.91.28,1.85.13,2.77-.14.92-.47,1.81-.97,2.61-.49.8-1.15,1.5-1.92,2.05l-59.35,42.61c-1.26.9-2.78,1.39-4.35,1.38Z" />
                                    <path id="low-path2" class="cls-11"
                                        d="M66.66,94.11c-1.56,0-3.09-.48-4.35-1.38L2.97,50.11c-1.56-1.12-2.6-2.8-2.88-4.66-.29-1.86.2-3.76,1.35-5.28,1.15-1.52,2.88-2.53,4.8-2.8,1.92-.28,3.87.19,5.43,1.31l55,39.45,55-39.45c1.56-1.12,3.51-1.59,5.43-1.31,1.92.28,3.64,1.29,4.8,2.8,1.15,1.52,1.64,3.42,1.35,5.28-.29,1.86-1.33,3.54-2.88,4.66l-59.35,42.61c-1.26.9-2.78,1.39-4.35,1.38Z" />
                                </svg></button>

                        </div>
                    </div>


                    <!-- category -->
                    <div class="padding-bottom-24 padding-responsive980">
                        <div class="mb-8 flex field-headline">Category<div class="asterisk-color">*</div>
                        </div>
                        <div class="dropdown">
                            <div class="dropbtn">Select task category</div>
                            <div class="dropdown-content">
                                <div class="tasks">Technical Task</div>
                                <div class="tasks">User Story</div>
                            </div>
                        </div>
                        <!-- subtask -->
                        <div class="assigned-flex padding-top-24">
                            <div class="mb-8 field-headline">Subtasks</div>
                            <div class="select-subtask"><span class="select-subtask-span">Add new
                                    subtask</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <div class="flex-evenly-start execution-parent">
                <div class="flex">
                    <div class="asterisk-color">*</div>
                    <div class="required-text">This field is required</div>
                </div>

                <!-- cleaning -->
                <div class="flex gap-16 execution-responsive">
                    <button class="cleaning low flex-just-align-center">
                        <span class="cleaning-text">Clear</span>
                        <svg onmouseover="changeCleaningColor()" onmouseleave="changeCleaningColorToStandard()"
                            class="cleaning-svg" id="close_icon" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 80 80">
                            <path class="cls-20"
                                d="M40,48.52l-29.81,29.81c-1.12,1.12-2.53,1.67-4.26,1.67s-3.14-.56-4.26-1.67c-1.12-1.12-1.67-2.54-1.67-4.26s.56-3.14,1.67-4.26l29.81-29.81L1.67,10.19c-1.12-1.12-1.67-2.53-1.67-4.26S.56,2.79,1.67,1.67C2.79.56,4.21,0,5.93,0s3.14.56,4.26,1.67l29.81,29.81L69.81,1.67c1.12-1.12,2.54-1.67,4.26-1.67s3.14.56,4.26,1.67c1.12,1.12,1.67,2.53,1.67,4.26s-.56,3.14-1.67,4.26l-29.81,29.81,29.81,29.81c1.12,1.12,1.67,2.54,1.67,4.26s-.56,3.14-1.67,4.26-2.54,1.67-4.26,1.67-3.14-.56-4.26-1.67l-29.81-29.81Z" />
                        </svg>
                    </button>

                    <!-- create task -->
                    <button onclick="animateButton()" required class="create-task"><span class="create-text">Create
                            Task</span></button>

                </div>
            </div>

        </form>

        <div class="alert-message" id="alertMessage">
            <div class="popup-message" id="popup-message"><span class="animate-text">Task added to board</span>
                <svg class="animate-svg" id="board_icon" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 114.4 96.8">
                    <defs>
                        <style>
                            .cls-55 {
                                fill: ghostwhite;
                                stroke-width: 0px;
                            }
                        </style>
                    </defs>
                    <path class="cls-55"
                        d="M88,8.8v79.2c0,2.33-.93,4.57-2.58,6.22-1.65,1.65-3.89,2.58-6.22,2.58h-17.6c-2.33,0-4.57-.93-6.22-2.58-1.65-1.65-2.58-3.89-2.58-6.22V8.8c0-2.33.93-4.57,2.58-6.22C57.03.93,59.27,0,61.6,0h17.6c2.33,0,4.57.93,6.22,2.58,1.65,1.65,2.58,3.89,2.58,6.22ZM61.6,88h17.6V8.8h-17.6v79.2ZM61.6,8.8v79.2c0,2.33-.93,4.57-2.58,6.22-1.65,1.65-3.89,2.58-6.22,2.58h-17.6c-2.33,0-4.57-.93-6.22-2.58-1.65-1.65-2.58-3.89-2.58-6.22V8.8c0-2.33.93-4.57,2.58-6.22C30.63.93,32.87,0,35.2,0h17.6c2.33,0,4.57.93,6.22,2.58,1.65,1.65,2.58,3.89,2.58,6.22ZM35.2,88h17.6s0-79.2,0-79.2h-17.6s0,79.2,0,79.2ZM35.2,8.8v79.2c0,2.33-.93,4.57-2.58,6.22-1.65,1.65-3.89,2.58-6.22,2.58H8.8c-2.33,0-4.57-.93-6.22-2.58C.93,92.57,0,90.33,0,88V8.8c0-2.33.93-4.57,2.58-6.22C4.23.93,6.47,0,8.8,0h17.6c2.33,0,4.57.93,6.22,2.58,1.65,1.65,2.58,3.89,2.58,6.22ZM8.8,88h17.6V8.8H8.8v79.2Z" />
                    <path class="cls-55"
                        d="M114.4,8.8v79.2c0,2.33-.93,4.57-2.58,6.22-1.65,1.65-3.89,2.58-6.22,2.58h-17.6c-2.33,0-4.57-.93-6.22-2.58-1.65-1.65-2.58-3.89-2.58-6.22V8.8c0-2.33.93-4.57,2.58-6.22C83.43.93,85.67,0,88,0h17.6c2.33,0,4.57.93,6.22,2.58,1.65,1.65,2.58,3.89,2.58,6.22ZM88,88h17.6s0-79.2,0-79.2h-17.6s0,79.2,0,79.2Z" />
                </svg>
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
        <script src="/js/firebase.js"></script>
        <script src="/js/script.js"></script>
        <script src="/js/load_tasks.js"></script>
        <script src="/js/add_task.js"></script>
</body>

</html>

<script>

    //title:   1.Title value muss aus inputfeld heraus geholt werden;
                // 2.Title muss in Datenbank gepusht werden
                //3. Title muss warten bis alles ausgefüllt
                //4. Title muss auf Board-Seite generiert werden


    //description siehe Title

    //select contacts

    // date; Wenn der Name der Funktion verändert wird, verändert sich Farbe-wo wird diese Funktion aufgerufen???
    // function setMinDateDatepicker() {
    //     let today = new Date();
    //     let tt = String(today.getDate()).padStart(2, '0');
    //     let mm = String(today.getMonth() + 1).padStart(2, '0');
    //     let jjjj = today.getFullYear();

    //     let unformDate = jjjj + '-' + mm + '-' + tt;
    //     document.getElementById('date-picker').min = unformDate;
    //     document.getElementById('date-picker').value = unformDate;
    // }

    // prio-buttons
    function changeColor(buttonId, path1Id, path2Id) {
        resetButtons();
        const buttons = [
            { id: 'btn1', color: '#ff3d00' },
            { id: 'btn2', color: '#ff7a00' },
            { id: 'btn3', color: '#7ae229' }
        ];
        for (const button of buttons) { //button Schleifenvariable; buttons = Array
            if (button.id === buttonId) {
                document.getElementById(button.id).style.backgroundColor = button.color;
                document.getElementById(button.id).style.color = 'white';
            }
        }
        document.getElementById(path1Id).classList.add('cls-13');
        document.getElementById(path2Id).classList.add('cls-13');
    }

    function resetButtons() {
        const buttons = ['btn1', 'btn2', 'btn3'];
        for (const id of buttons) {
            document.getElementById(id).style.backgroundColor = 'white';
            document.getElementById(id).style.color = 'black';
        }
    }

    // clear-button
    function changeCleaningColor() {
        document.querySelector('#close_icon .cls-20').style.fill = '#00bee8';
    }

    function changeCleaningColorToStandard() {
        document.querySelector('#close_icon .cls-20').style.fill = '#2a3647';
    }

    // animation
    function animateButton() {
        document.getElementById('alertMessage').style.display = "flex";
        let alertMessage = document.getElementById("popup-message");

        setTimeout(() => {
            alertMessage.classList.add('translateNull');
            setTimeout(() => {
                alertMessage.classList.remove('translateNull');
                document.getElementById('alertMessage').style.display = "none";
            }, 2000);
        }, 250);
    }


    //category

    //subtask



</script>